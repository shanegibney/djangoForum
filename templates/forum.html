{% extends 'index.html' %}
{% load crudapp_tags %}
{% block homepage %}
<div>
  <p>{% if user.is_authenticated %}Add a New Topic: <a href="{% url 'topic_form' %}"><span class="glyphicon glyphicon-plus"></span></a>{% endif %}</p>
</div>
<div>
  <p>{{ totalposts.count }} posts, {{ totaltopics.count }} topics, {{ totalusers.count }} users, {{ totalviews.numviews}} views</p>
</div>
<div class="post">
  {% if forum_model %}
  <div class="table-responsive">
    <table class='table table-striped table-hover'>
      <thead>
        <tr>
          <th>Topic</th>
          <th>Topic Started By</th>
          <th>Last Active</th>
          <th class="table-cell-center">Views</th>
          <th class="table-cell-center">Posts</th>
        </tr>
      </thead>
      <tbody>
        {% for item in forum_model %}
        <tr>
          <td><a href="{% url 'thread' item.topic_id %}">{{ item.topic.topic }}</a></td>
          <td><a href="{% url 'profile' item.topic.author_id %}">{{ item.topic.topicAuthor }}</a></td>
          <td class="icon-nowrap">{{ item.pub_date|timesince:current_time}}</td>
          <td class="table-cell-center">{{ item.topic.views }}</td>
          <td class="table-cell-center">{{ item.freq }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <span class="step-links pagination">
        {% if forum_model.has_previous %}
            <a href="?page={{ forum_model.previous_page_number }}"><span class="glyphicon glyphicon-arrow-left"></span></a>
        {% endif %}
        <span class="current">
            Page {{ forum_model.number }} of {{ forum_model.paginator.num_pages }}
        </span>
        {% if forum_model.has_next %}
            <a href="?page={{ forum_model.next_page_number }}"><span class="glyphicon glyphicon-arrow-right"></span></a>
        {% endif %}
    </span>
    {% endif %}
  </div>
</div>
{% endblock %}
